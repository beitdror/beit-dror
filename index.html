<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>××¢×¨×›×ª ×œ×•×– ×“×™×’×™×˜×œ×™×ª - ×‘×™×ª ×“×¨×•×¨ğŸ³ï¸â€ğŸŒˆ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-main: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --bg-card: #ffffff;
            --bg-fixed: #f0f4ff;
            --bg-hover: #f9fafb;
            --border: #e0e7ff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --primary: #8b5cf6;
            --primary-hover: #7c3aed;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Heebo', sans-serif;
            background: var(--bg-main);
            background-attachment: fixed;
            color: var(--text-primary);
            line-height: 1.6;
            padding: 10px; /* ×¤×—×•×ª ×¨×™×¤×•×“ ×‘××•×‘×™×™×œ */
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding-bottom: 50px;
        }

        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            color: white;
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        /* Tabs Styles */
        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            background: white;
            padding: 10px;
            border-radius: 12px;
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
        }

        .tab {
            padding: 10px 20px;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Heebo', sans-serif;
            font-size: 15px;
            font-weight: 600;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .tab.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Card Styles - ×× ×™××¦×™×” ×”×•×¡×¨×” */
        .card {
            background: var(--bg-card);
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            /* ×‘×•×˜×œ×” ×”×× ×™××¦×™×” ×©××¢×¦×‘× ×ª */
            transform: none !important; 
            transition: box-shadow 0.3s ease;
        }

        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 600; font-size: 14px; }
        .form-group input, .form-group select {
            width: 100%; padding: 10px; border: 1px solid var(--border);
            border-radius: 8px; font-family: inherit; font-size: 16px; /* ×’×•×“×œ ×¤×•× ×˜ ×œ×× ×™×¢×ª ×–×•× ×‘××™×™×¤×•×Ÿ */
        }

        /* Buttons */
        .btn {
            padding: 10px 20px; border: none; border-radius: 8px;
            font-family: inherit; font-weight: 600; cursor: pointer;
            transition: opacity 0.2s;
        }
        .btn:active { transform: scale(0.98); }
        .btn-primary { background: var(--primary); color: white; }
        .btn-success { background: #10b981; color: white; }
        .btn-danger { background: #ef4444; color: white; }
        .btn-secondary { background: #e2e8f0; color: var(--text-primary); }

        /* Schedule Table & Sticky Fixes */
        .table-wrapper {
            position: relative;
            max-height: 70vh; /* ×’×•×‘×” ××§×¡×™××œ×™ ×œ×’×œ×™×œ×” */
            overflow: auto;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: white;
            /* ×©×™×¤×•×¨ ×‘×™×¦×•×¢×™× ×œ×’×œ×™×œ×” */
            -webkit-overflow-scrolling: touch;
            will-change: scroll-position;
        }

        .schedule-table {
            width: 100%;
            border-collapse: separate; /* ×—×©×•×‘ ×œ-Sticky */
            border-spacing: 0;
            min-width: 600px; /* ×¨×•×—×‘ ××™× ×™××œ×™ ×›×“×™ ×©×œ× ×™××¢×š */
        }

        .schedule-table th {
            position: sticky;
            top: 0;
            background: var(--bg-fixed);
            z-index: 20; /* ××¢×œ ×©××¨ ×”×ª××™× */
            padding: 12px;
            font-weight: 700;
            border-bottom: 2px solid var(--border);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .schedule-table td {
            border-bottom: 1px solid var(--border);
            border-left: 1px solid var(--border);
            padding: 8px;
            vertical-align: top;
            min-width: 100px;
        }

        /* ×¢××•×“×ª ×”×©×¢×•×ª - Sticky */
        .schedule-table .time-cell {
            position: sticky;
            right: 0; /* ×‘×’×œ×œ RTL, ×–×” ×”×¦×“ ×”×™×× ×™ */
            background: var(--bg-fixed);
            z-index: 15; /* ××¢×œ ×ª××™× ×¨×’×™×œ×™×, ××ª×—×ª ×œ×›×•×ª×¨×ª */
            font-weight: 600;
            border-left: 2px solid var(--border);
            width: 80px;
            text-align: center;
        }
        
        /* ×ª×™×§×•×Ÿ ×œ×‘×•×¨×“×¨×™× ×‘-Sticky */
        .schedule-table th:first-child { z-index: 25; /* ×”×¤×™× ×” ×”×¢×œ×™×•× ×” ×™×× ×™×ª */ }

        .schedule-table textarea {
            width: 100%; border: none; background: transparent;
            resize: none; font-family: inherit; min-height: 40px;
        }
        .schedule-table textarea:focus { outline: none; background: #fffbe6; }

        /* Student Tags (×œ×× ×™×¢×ª ×—×¤×™×¤×•×ª) */
        .student-tag {
            display: block; /* ×›×œ × ×¢×¨ ×‘×©×•×¨×” × ×¤×¨×“×ª ×‘×ª×•×š ×”××©×‘×¦×ª */
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
            margin-bottom: 4px;
            color: white;
            font-weight: 500;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            word-break: break-word;
            text-align: right;
        }

        .student-tag .name { font-weight: 700; margin-left: 4px; }
        .student-tag .activity { opacity: 0.95; }

        /* Modal */
        .modal {
            display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.5); z-index: 1000;
            align-items: center; justify-content: center;
            padding: 20px;
        }
        .modal.show { display: flex; }
        .modal-content {
            background: white; padding: 24px; border-radius: 12px;
            width: 100%; max-width: 500px; max-height: 90vh; overflow-y: auto;
        }

        /* ×¨×¡×¤×•× ×¡×™×‘×™×•×ª */
        @media (max-width: 768px) {
            .header h1 { font-size: 20px; }
            .card { padding: 15px; }
            .btn { width: 100%; margin-bottom: 5px; }
            .combined-view-controls { flex-direction: column; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <h1>ğŸ“… ××¢×¨×›×ª ×œ×•×– ×“×™×’×™×˜×œ×™×ª - ×‘×™×ª ×“×¨×•×¨ğŸ³ï¸â€ğŸŒˆ</h1>
        <p>××™×œ×•×™ ×•××™×©×•×¨ ×œ×•×–×™× ×©×‘×•×¢×™×™×</p>
    </div>

    <div class="tabs">
        <button class="tab active" onclick="switchTab('student')">× ×¢×¨</button>
        <button class="tab" onclick="switchTab('coordinator')">×¨×›×–×ª ×—×™× ×•×›×™×ª</button>
        <button class="tab" onclick="switchTab('combined')">×œ×•×– ×›×•×œ×œ</button>
        <button class="tab" onclick="switchTab('archive')">ğŸ“¦ ××¨×›×™×•×Ÿ</button>
    </div>

    <div id="student-tab" class="tab-content active">
        <div class="card">
            <h2>××™×œ×•×™ ×œ×•×– ××™×©×™</h2>
            <div class="form-group">
                <label>×©× ×”× ×¢×¨/×”</label>
                <input type="text" id="studentName" placeholder="×œ×“×•×’××”: ×“× ×™××œ">
            </div>
            
            <div class="table-wrapper">
                <table class="schedule-table" id="studentTable">
                    </table>
            </div>

            <div style="margin-top: 20px;">
                <button class="btn btn-success" onclick="submitSchedule()">×©×œ×— ×œ××™×©×•×¨ ×”×¨×›×–×ª</button>
            </div>
        </div>
    </div>

    <div id="coordinator-tab" class="tab-content">
        <div class="card">
            <h2>×‘×§×©×•×ª ×××ª×™× ×•×ª ×œ××™×©×•×¨</h2>
            <div id="pendingList">
                <p style="text-align: center; color: var(--text-secondary);">×˜×•×¢×Ÿ × ×ª×•× ×™×...</p>
            </div>
        </div>
    </div>

    <div id="combined-tab" class="tab-content">
        <div class="card">
            <h2>×œ×•×– ×©×‘×•×¢×™ ×›×•×œ×œ</h2>
            <div class="combined-view-controls" style="margin-bottom: 15px;">
                <button class="btn btn-secondary" onclick="loadCombinedSchedule()">ğŸ”„ ×¨×¢× ×Ÿ × ×ª×•× ×™×</button>
            </div>
            
            <div class="table-wrapper">
                <table class="schedule-table" id="combinedTable">
                    </table>
            </div>
        </div>
    </div>

    <div id="archive-tab" class="tab-content">
        <div class="card">
            <h2>××¨×›×™×•×Ÿ ×œ×•×–×™×</h2>
            <div class="form-group">
                <label>×‘×—×¨ ×©×‘×•×¢ ××”×¢×‘×¨</label>
                <select id="archiveWeekSelect" onchange="loadArchiveData()">
                    <option value="">-- ×‘×—×¨ ×©×‘×•×¢ --</option>
                </select>
            </div>
            <div id="archiveContent">
                <p style="text-align: center; color: var(--text-secondary);">×‘×—×¨ ×©×‘×•×¢ ×œ×¦×¤×™×™×”</p>
            </div>
        </div>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

<script>
    // --- 1. ×”×’×“×¨×•×ª ×•×”×ª×—×œ×” ---
    const firebaseConfig = {
        apiKey: "AIzaSyD5Ma2GAqiPFKurMedUgU6Qgl-qk_Uop-s",
        authDomain: "beit-dror1.firebaseapp.com",
        databaseURL: "https://beit-dror1-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "beit-dror1",
        storageBucket: "beit-dror1.firebasestorage.app",
        messagingSenderId: "397103626096",
        appId: "1:397103626096:web:6f12003cc1447ea1c201b5",
        measurementId: "G-TF1PXMP3XS"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ××‘× ×” ×‘×¡×™×¡×™ ×©×œ ×™××™× ×•×©×¢×•×ª
    const days = ['×¨××©×•×Ÿ', '×©× ×™', '×©×œ×™×©×™', '×¨×‘×™×¢×™', '×—××™×©×™', '×©×™×©×™', '×©×‘×ª'];
    const hours = [
        '08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', 
        '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00', '22:00'
    ];

    let currentWeekId = getWeekId(new Date());

    // --- 2. ×¤×•× ×§×¦×™×•×ª ×¢×–×¨ ---

    function getWeekId(date) {
        // ××—×–×™×¨ ××–×”×” ×™×™×—×•×“×™ ×œ×©×‘×•×¢ (×œ××©×œ: 2023-W42)
        const d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
        const dayNum = d.getUTCDay() || 7;
        d.setUTCDate(d.getUTCDate() + 4 - dayNum);
        const year = d.getUTCFullYear();
        const weekNo = Math.ceil(( ( (d - new Date(Date.UTC(year,0,1))) / 86400000) + 1)/7);
        return `${year}-W${weekNo}`;
    }

    // ×¤×•× ×§×¦×™×” ×œ×™×¦×™×¨×ª ×¦×‘×¢ ×™×™×—×•×“×™ ××©× (×¢×§×‘×™ ×œ×›×œ × ×¢×¨)
    function stringToColor(str) {
        let hash = 0;
        for (let i = 0; i < str.length; i++) {
            hash = str.charCodeAt(i) + ((hash << 5) - hash);
        }
        // ×©×™××•×© ×‘-HSL ×œ×¦×‘×¢×™× × ×¢×™××™× ×•×‘×¨×•×¨×™×
        const h = Math.abs(hash % 360);
        return `hsl(${h}, 70%, 40%)`; // ×›×”×” ××¡×¤×™×§ ×œ×˜×§×¡×˜ ×œ×‘×Ÿ
    }

    function switchTab(tabName) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        
        // ×›×¤×ª×•×¨ ×¤×¢×™×œ
        const activeBtn = Array.from(document.querySelectorAll('.tab')).find(b => b.textContent.includes(tabName === 'student' ? '× ×¢×¨' : tabName === 'coordinator' ? '×¨×›×–×ª' : tabName === 'combined' ? '×›×•×œ×œ' : '××¨×›×™×•×Ÿ'));
        if(activeBtn) activeBtn.classList.add('active');

        document.getElementById(`${tabName}-tab`).classList.add('active');

        if (tabName === 'combined') loadCombinedSchedule();
        if (tabName === 'coordinator') loadPendingRequests();
        if (tabName === 'archive') initArchiveTab();
    }

    // --- 3. ×œ×•×’×™×§×”: × ×¢×¨ (Student) ---

    function renderStudentTable() {
        const table = document.getElementById('studentTable');
        let html = '<thead><tr><th class="time-cell">×©×¢×”</th>';
        days.forEach(day => html += `<th>${day}</th>`);
        html += '</tr></thead><tbody>';

        hours.forEach(hour => {
            html += `<tr><td class="time-cell">${hour}</td>`;
            days.forEach(day => {
                html += `<td><textarea class="schedule-input" data-day="${day}" data-time="${hour}" placeholder="..."></textarea></td>`;
            });
            html += '</tr>';
        });
        html += '</tbody>';
        table.innerHTML = html;
    }

    function submitSchedule() {
        const name = document.getElementById('studentName').value.trim();
        if (!name) { alert('× × ×œ×”×–×™×Ÿ ×©× ×œ×¤× ×™ ×”×©×œ×™×—×”'); return; }

        const inputs = document.querySelectorAll('.schedule-input');
        const scheduleData = {};
        let hasContent = false;

        inputs.forEach(input => {
            const val = input.value.trim();
            if (val) {
                const day = input.getAttribute('data-day');
                const time = input.getAttribute('data-time');
                if (!scheduleData[day]) scheduleData[day] = {};
                scheduleData[day][time] = val;
                hasContent = true;
            }
        });

        if (!hasContent) { alert('×”×œ×•×– ×¨×™×§!'); return; }

        // ×©××™×¨×” ×‘-Firebase
        db.ref(`schedules/${currentWeekId}/${name}`).set({
            data: scheduleData,
            status: 'pending', // ×××ª×™×Ÿ ×œ××™×©×•×¨
            timestamp: Date.now()
        }).then(() => {
            alert('×”×œ×•×– × ×©×œ×— ×‘×”×¦×œ×—×” ×œ××™×©×•×¨ ×”×¨×›×–×ª!');
            // × ×™×§×•×™ ×˜×•×¤×¡ ××•×¤×¦×™×•× ×œ×™
        }).catch(err => alert('×©×’×™××”: ' + err.message));
    }

    // --- 4. ×œ×•×’×™×§×”: ×¨×›×–×ª (Coordinator) ---

    function loadPendingRequests() {
        const listDiv = document.getElementById('pendingList');
        listDiv.innerHTML = '×˜×•×¢×Ÿ...';

        db.ref(`schedules/${currentWeekId}`).once('value').then(snapshot => {
            const data = snapshot.val();
            if (!data) {
                listDiv.innerHTML = '<p>××™×Ÿ ×‘×§×©×•×ª ×××ª×™× ×•×ª ×œ×©×‘×•×¢ ×–×”.</p>';
                return;
            }

            let html = '';
            Object.keys(data).forEach(studentName => {
                const studentData = data[studentName];
                if (studentData.status === 'pending') {
                    html += `
                        <div class="card" style="border: 1px solid var(--primary);">
                            <h3>ğŸ‘¤ ${studentName}</h3>
                            <p>×©×œ×— ×œ×•×– ×œ××™×©×•×¨.</p>
                            <div style="margin-top: 10px; display: flex; gap: 10px;">
                                <button class="btn btn-success" onclick="approveSchedule('${studentName}')">××©×¨ ×œ×•×–</button>
                                <button class="btn btn-secondary" onclick="viewStudentSchedule('${studentName}')">×¦×¤×” ×‘×¤×¨×˜×™×</button>
                            </div>
                        </div>
                    `;
                }
            });
            listDiv.innerHTML = html || '<p>××™×Ÿ ×‘×§×©×•×ª ×××ª×™× ×•×ª.</p>';
        });
    }

    function approveSchedule(name) {
        db.ref(`schedules/${currentWeekId}/${name}/status`).set('approved').then(() => {
            alert(`×”×œ×•×– ×©×œ ${name} ××•×©×¨!`);
            loadPendingRequests();
        });
    }

    // --- 5. ×œ×•×’×™×§×”: ×œ×•×– ×›×•×œ×œ (Combined) - ×”×ª×™×§×•×Ÿ ×”×’×“×•×œ ---

    function loadCombinedSchedule() {
        const table = document.getElementById('combinedTable');
        
        // 1. ×™×¦×™×¨×ª ×©×œ×“ ×”×˜×‘×œ×”
        let html = '<thead><tr><th class="time-cell">×©×¢×”</th>';
        days.forEach(day => html += `<th>${day}</th>`);
        html += '</tr></thead><tbody>';

        // × ×‘× ×” ××ª ×”×’×•×£ ×¨×™×§ ×§×•×“×
        hours.forEach(hour => {
            html += `<tr><td class="time-cell">${hour}</td>`;
            days.forEach(day => {
                html += `<td id="cell-${day}-${hour.replace(':','-')}"></td>`;
            });
            html += '</tr>';
        });
        html += '</tbody>';
        table.innerHTML = html;

        // 2. ××©×™×›×ª × ×ª×•× ×™× ×•××™×œ×•×™ ×”×ª××™×
        db.ref(`schedules/${currentWeekId}`).once('value').then(snapshot => {
            const allSchedules = snapshot.val();
            if (!allSchedules) return;

            Object.keys(allSchedules).forEach(studentName => {
                const studentEntry = allSchedules[studentName];
                // ××¦×™×’×™× ×¨×§ ×× ××•×©×¨ (××• ×× ×¨×•×¦×™× ×œ×”×¦×™×’ ×”×›×œ, ×›×¨×’×¢ ××¦×™×’ ×¨×§ approved)
                if (studentEntry.status === 'approved' && studentEntry.data) {
                    const color = stringToColor(studentName);
                    
                    Object.keys(studentEntry.data).forEach(day => {
                        Object.keys(studentEntry.data[day]).forEach(time => {
                            const activity = studentEntry.data[day][time];
                            const cellId = `cell-${day}-${time.replace(':','-')}`;
                            const cell = document.getElementById(cellId);
                            
                            if (cell) {
                                // ×™×¦×™×¨×ª ×ª×’×™×ª (Tag) ×‘××§×•× ×¦×‘×™×¢×ª ×›×œ ×”×ª×
                                const tag = document.createElement('div');
                                tag.className = 'student-tag';
                                tag.style.backgroundColor = color;
                                tag.innerHTML = `<span class="name">${studentName}:</span> <span class="activity">${activity}</span>`;
                                cell.appendChild(tag);
                            }
                        });
                    });
                }
            });
        });
    }

    // --- 6. ×œ×•×’×™×§×”: ××¨×›×™×•×Ÿ (Archive) - ×”×ª×™×§×•×Ÿ ×”×—×¡×¨ ---

    function initArchiveTab() {
        const select = document.getElementById('archiveWeekSelect');
        // × ×§×” ××¤×©×¨×•×™×•×ª ×§×•×“××•×ª (×—×•×¥ ××”×¨××©×•× ×”)
        while (select.options.length > 1) { select.remove(1); }

        // ×©×œ×™×¤×ª ×¨×©×™××ª ×”×©×‘×•×¢×•×ª ×”×§×™×™××™× ×‘×“××˜×”×‘×™×™×¡
        db.ref('schedules').once('value').then(snapshot => {
            if (!snapshot.exists()) return;
            
            const weeks = Object.keys(snapshot.val()).sort().reverse(); // ××”×—×“×© ×œ×™×©×Ÿ
            
            weeks.forEach(week => {
                if (week !== currentWeekId) { // ×œ× ××¦×™×’ ××ª ×”×©×‘×•×¢ ×”× ×•×›×—×™ ×‘××¨×›×™×•×Ÿ
                    const option = document.createElement('option');
                    option.value = week;
                    option.textContent = week; // ××¤×©×¨ ×œ×¤×¨××˜ ×œ×ª××¨×™×š ×™×¤×” ×™×•×ª×¨
                    select.appendChild(option);
                }
            });
        });
    }

    function loadArchiveData() {
        const selectedWeek = document.getElementById('archiveWeekSelect').value;
        const container = document.getElementById('archiveContent');
        
        if (!selectedWeek) {
            container.innerHTML = '';
            return;
        }

        container.innerHTML = '×˜×•×¢×Ÿ × ×ª×•× ×™ ××¨×›×™×•×Ÿ...';

        // ×‘× ×™×™×ª ×˜×‘×œ×” ×–×”×” ×œ×œ×•×– ×”×›×•×œ×œ, ×¨×§ ×œ×§×¨×™××”
        let html = '<div class="table-wrapper"><table class="schedule-table"><thead><tr><th class="time-cell">×©×¢×”</th>';
        days.forEach(day => html += `<th>${day}</th>`);
        html += '</tr></thead><tbody>';

        // ×”×›× ×ª ××‘× ×” × ×ª×•× ×™× ×‘×–×™×›×¨×•×Ÿ
        const grid = {}; 

        db.ref(`schedules/${selectedWeek}`).once('value').then(snapshot => {
            const weekData = snapshot.val();
            
            if (!weekData) {
                container.innerHTML = '××™×Ÿ × ×ª×•× ×™× ×œ×©×‘×•×¢ ×–×”.';
                return;
            }

            // ×¢×™×‘×•×“ ×”× ×ª×•× ×™×
            hours.forEach(hour => {
                html += `<tr><td class="time-cell">${hour}</td>`;
                days.forEach(day => {
                    let cellContent = '';
                    
                    Object.keys(weekData).forEach(studentName => {
                        const sData = weekData[studentName];
                        if (sData.data && sData.data[day] && sData.data[day][hour]) {
                            const color = stringToColor(studentName);
                            cellContent += `
                                <div class="student-tag" style="background-color: ${color}">
                                    <span class="name">${studentName}:</span> 
                                    <span>${sData.data[day][hour]}</span>
                                </div>`;
                        }
                    });
                    
                    html += `<td>${cellContent}</td>`;
                });
                html += '</tr>';
            });
            html += '</tbody></table></div>';
            
            container.innerHTML = html;
        });
    }

    // ××ª×—×•×œ ×¨××©×•× ×™
    renderStudentTable();
    
    // ×‘×“×™×§×” ×× ×”××©×ª××© ×‘××•×‘×™×™×œ ×•×’×œ×™×œ×” ×œ××™×§×•× ×”× ×•×›×—×™ ×‘×–××Ÿ (××•×¤×¦×™×•× ×œ×™)
    window.addEventListener('load', () => {
        // ×›××Ÿ ××¤×©×¨ ×œ×”×•×¡×™×£ ×œ×•×’×™×§×” ×œ×’×œ×•×œ ×œ×©×¢×” ×”× ×•×›×—×™×ª
    });

</script>

</body>
</html>
